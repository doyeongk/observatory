<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vigil</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;1,300&family=DM+Mono:wght@300&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

    html, body {
      width: 100%; height: 100%;
      background: #060507;
      overflow: hidden;
      cursor: default;
    }

    canvas#field { position: fixed; inset: 0; z-index: 1; }

    /* Central glow — the stage warming up */
    .stage-glow {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 40vmin;
      height: 40vmin;
      border-radius: 50%;
      background: radial-gradient(
        circle,
        rgba(194, 136, 58, 0.06) 0%,
        rgba(194, 136, 58, 0.02) 30%,
        transparent 70%
      );
      z-index: 2;
      pointer-events: none;
      animation: stage-breathe 8s ease-in-out infinite;
    }

    /* Ghost number — 500 */
    .ghost-count {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -52%);
      z-index: 3;
      pointer-events: none;
      font-family: 'Cormorant Garamond', serif;
      font-weight: 300;
      font-size: clamp(12rem, 32vmin, 24rem);
      color: rgba(194, 136, 58, 0.0);
      letter-spacing: -0.03em;
      line-height: 0.85;
      user-select: none;
      animation: ghost-500 25s ease-in-out infinite;
    }

    /* Bottom text */
    .text-layer {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: 10;
      pointer-events: none;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-bottom: 8%;
      gap: 0.8em;
    }

    .title-label {
      font-family: 'Cormorant Garamond', serif;
      font-weight: 300;
      font-style: italic;
      font-size: clamp(0.7rem, 1.5vmin, 1.1rem);
      letter-spacing: 0.5em;
      text-transform: lowercase;
      color: rgba(194, 156, 98, 0.0);
      animation: text-appear 16s ease-in-out infinite;
    }

    .sub-label {
      font-family: 'DM Mono', monospace;
      font-weight: 300;
      font-size: clamp(0.32rem, 0.6vmin, 0.45rem);
      letter-spacing: 0.55em;
      text-transform: lowercase;
      color: rgba(140, 130, 150, 0.0);
      animation: text-appear 16s ease-in-out infinite 4s;
    }

    @keyframes stage-breathe {
      0%, 100% { opacity: 0.6; transform: translate(-50%, -50%) scale(1); }
      50% { opacity: 1; transform: translate(-50%, -50%) scale(1.08); }
    }

    @keyframes ghost-500 {
      0%, 100% { color: rgba(194, 136, 58, 0.0); }
      35%, 65% { color: rgba(194, 136, 58, 0.018); }
    }

    @keyframes text-appear {
      0%, 100% { opacity: 0; }
      30%, 70% { opacity: 1; }
    }

    /* Film grain */
    .grain {
      position: fixed; inset: 0;
      pointer-events: none;
      z-index: 90;
      mix-blend-mode: overlay;
      opacity: 0.15;
    }
    .grain svg { width: 100%; height: 100%; display: block; }

    /* Horizon line */
    .horizon {
      position: fixed;
      top: 62%;
      left: 0;
      right: 0;
      height: 1px;
      z-index: 2;
      pointer-events: none;
      background: linear-gradient(
        90deg,
        transparent 5%,
        rgba(194, 136, 58, 0.03) 30%,
        rgba(194, 156, 98, 0.06) 50%,
        rgba(194, 136, 58, 0.03) 70%,
        transparent 95%
      );
      animation: horizon-pulse 12s ease-in-out infinite;
    }

    @keyframes horizon-pulse {
      0%, 100% { opacity: 0.4; }
      50% { opacity: 1; }
    }
  </style>
</head>
<body>

  <canvas id="field"></canvas>

  <div class="stage-glow"></div>
  <div class="horizon"></div>

  <div class="ghost-count">500</div>

  <div class="text-layer">
    <div class="title-label">vigil</div>
    <div class="sub-label">the night before five hundred strangers listen</div>
  </div>

  <div class="grain">
    <svg xmlns="http://www.w3.org/2000/svg">
      <filter id="g">
        <feTurbulence type="fractalNoise" baseFrequency="0.65" numOctaves="4" stitchTiles="stitch"/>
        <feColorMatrix type="saturate" values="0"/>
      </filter>
      <rect width="100%" height="100%" filter="url(#g)" opacity="0.04"/>
    </svg>
  </div>

  <script>
    const canvas = document.getElementById('field');
    const ctx = canvas.getContext('2d');
    let W, H, cx, cy;

    function resize() {
      W = canvas.width = window.innerWidth;
      H = canvas.height = window.innerHeight;
      cx = W * 0.5;
      cy = H * 0.48;
    }
    resize();
    window.addEventListener('resize', resize);

    // === 500 SOULS — the audience gathering ===
    const SOULS = 500;
    const souls = [];

    for (let i = 0; i < SOULS; i++) {
      // Distribute in a rough ellipse/amphitheater around center
      const angle = Math.random() * Math.PI * 2;
      const dist = 60 + Math.random() * Math.min(W || 800, H || 600) * 0.42;
      const orbitSpeed = (0.00003 + Math.random() * 0.00008) * (Math.random() > 0.5 ? 1 : -1);

      souls.push({
        angle,
        dist,
        orbitSpeed,
        wobblePhase: Math.random() * Math.PI * 2,
        wobbleSpeed: 0.0004 + Math.random() * 0.0008,
        wobbleAmp: 2 + Math.random() * 8,
        r: 0.3 + Math.random() * 1.1,
        baseAlpha: 0.04 + Math.random() * 0.14,
        pulsePhase: Math.random() * Math.PI * 2,
        pulseSpeed: 0.0006 + Math.random() * 0.002,
        // Color: warm near center, cool far out
        warmth: 0,
        x: 0, y: 0,
      });
    }

    // === THE SPEAKER — one bright warm point ===
    const speaker = {
      x: 0, y: 0,
      phase: 0,
      breatheSpeed: 0.001,
    };

    // === OCCASIONAL CONNECTIONS — thoughts between souls ===
    const connections = [];
    let connTimer = 0;
    const CONN_INTERVAL = 200;

    function spawnConnection() {
      const a = Math.floor(Math.random() * SOULS);
      let b = Math.floor(Math.random() * SOULS);
      while (b === a) b = Math.floor(Math.random() * SOULS);

      const sa = souls[a], sb = souls[b];
      const dx = sa.x - sb.x, dy = sa.y - sb.y;
      const d = Math.hypot(dx, dy);
      if (d < 120) {
        connections.push({ a, b, life: 1, decay: 0.003 + Math.random() * 0.005 });
      }
    }

    // === RENDER ===
    function frame(ts) {
      // Deep dark background with warm vignette
      ctx.fillStyle = '#060507';
      ctx.fillRect(0, 0, W, H);

      // Warm center wash
      const warmGlow = ctx.createRadialGradient(cx, cy, 0, cx, cy, Math.min(W, H) * 0.55);
      warmGlow.addColorStop(0, 'rgba(194, 136, 58, 0.018)');
      warmGlow.addColorStop(0.2, 'rgba(180, 120, 50, 0.008)');
      warmGlow.addColorStop(0.5, 'rgba(100, 70, 40, 0.003)');
      warmGlow.addColorStop(1, 'transparent');
      ctx.fillStyle = warmGlow;
      ctx.fillRect(0, 0, W, H);

      // Cool upper wash — the dark sky above
      const coolWash = ctx.createRadialGradient(W * 0.3, H * 0.15, 0, W * 0.3, H * 0.15, H * 0.5);
      coolWash.addColorStop(0, 'rgba(60, 55, 90, 0.008)');
      coolWash.addColorStop(1, 'transparent');
      ctx.fillStyle = coolWash;
      ctx.fillRect(0, 0, W, H);

      // === Update & draw speaker ===
      speaker.phase += speaker.breatheSpeed;
      speaker.x = cx + Math.sin(ts * 0.0001) * 3;
      speaker.y = cy + Math.cos(ts * 0.00013) * 2;
      const speakerPulse = 0.7 + Math.sin(speaker.phase) * 0.3;

      // Speaker outer glow
      const spGlow = ctx.createRadialGradient(speaker.x, speaker.y, 0, speaker.x, speaker.y, 45);
      spGlow.addColorStop(0, `rgba(220, 170, 90, ${0.12 * speakerPulse})`);
      spGlow.addColorStop(0.3, `rgba(194, 136, 58, ${0.04 * speakerPulse})`);
      spGlow.addColorStop(0.7, `rgba(160, 110, 50, ${0.008 * speakerPulse})`);
      spGlow.addColorStop(1, 'transparent');
      ctx.fillStyle = spGlow;
      ctx.beginPath();
      ctx.arc(speaker.x, speaker.y, 45, 0, Math.PI * 2);
      ctx.fill();

      // Speaker core
      ctx.beginPath();
      ctx.arc(speaker.x, speaker.y, 2.5, 0, Math.PI * 2);
      ctx.fillStyle = `rgba(255, 220, 160, ${0.6 * speakerPulse})`;
      ctx.fill();

      // === Update & draw souls ===
      for (const s of souls) {
        s.angle += s.orbitSpeed;
        const wobble = Math.sin(ts * s.wobbleSpeed + s.wobblePhase) * s.wobbleAmp;

        s.x = cx + Math.cos(s.angle) * (s.dist + wobble);
        s.y = cy + Math.sin(s.angle) * (s.dist + wobble) * 0.65; // elliptical

        // Distance from speaker for color
        const dToCenter = Math.hypot(s.x - cx, s.y - cy);
        const maxDist = Math.hypot(W * 0.45, H * 0.35);
        s.warmth = 1 - Math.min(1, dToCenter / maxDist);

        const pulse = Math.sin(ts * s.pulseSpeed + s.pulsePhase) * 0.5 + 0.5;
        const alpha = s.baseAlpha * (0.3 + pulse * 0.7);

        // Color: warm amber near center → cool slate-blue far
        const h = 32 + (1 - s.warmth) * 195; // amber → slate blue
        const sat = 40 + s.warmth * 35;
        const lit = 45 + s.warmth * 20 + pulse * 10;

        // Soul glow (only for larger/brighter ones)
        if (s.r > 0.7 && alpha > 0.08) {
          const sg = ctx.createRadialGradient(s.x, s.y, 0, s.x, s.y, s.r * 8);
          sg.addColorStop(0, `hsla(${h}, ${sat}%, ${lit}%, ${alpha * 0.15})`);
          sg.addColorStop(1, 'transparent');
          ctx.fillStyle = sg;
          ctx.beginPath();
          ctx.arc(s.x, s.y, s.r * 8, 0, Math.PI * 2);
          ctx.fill();
        }

        // Soul core
        ctx.beginPath();
        ctx.arc(s.x, s.y, s.r, 0, Math.PI * 2);
        ctx.fillStyle = `hsla(${h}, ${sat}%, ${lit}%, ${alpha})`;
        ctx.fill();
      }

      // === Connections — fleeting links between nearby souls ===
      connTimer++;
      if (connTimer >= CONN_INTERVAL) {
        spawnConnection();
        connTimer = 0;
      }

      for (let i = connections.length - 1; i >= 0; i--) {
        const c = connections[i];
        c.life -= c.decay;
        if (c.life <= 0) { connections.splice(i, 1); continue; }

        const sa = souls[c.a], sb = souls[c.b];
        const a = c.life * 0.025;
        ctx.beginPath();
        ctx.moveTo(sa.x, sa.y);
        ctx.lineTo(sb.x, sb.y);
        ctx.strokeStyle = `rgba(194, 156, 98, ${a})`;
        ctx.lineWidth = 0.3;
        ctx.stroke();
      }

      requestAnimationFrame(frame);
    }

    requestAnimationFrame(frame);
  </script>
</body>
</html>
