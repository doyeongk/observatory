<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Observatory ðŸ”­</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @keyframes pulse-slow {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }
    .pulse-slow { animation: pulse-slow 3s ease-in-out infinite; }
  </style>
  <script>
    setInterval(() => {
      fetch('state.json?' + Date.now())
        .then(r => r.json())
        .then(data => updateDashboard(data))
        .catch(() => {});
    }, 5000);

    function updateDashboard(data) {
      if (data.pi) {
        document.getElementById('cpu').textContent = data.pi.cpu || '-';
        document.getElementById('mem').textContent = data.pi.memory || '-';
        document.getElementById('temp').textContent = data.pi.temp || '-';
        document.getElementById('disk').textContent = data.pi.disk || '-';
      }
      if (data.clawdbot) {
        document.getElementById('uptime').textContent = data.clawdbot.uptime || '-';
        document.getElementById('sessions').textContent = data.clawdbot.sessions || '-';
        document.getElementById('lastActivity').textContent = data.clawdbot.lastActivity || '-';
      }
      if (data.canvas) {
        document.getElementById('canvas-content').innerHTML = data.canvas.html || '';
      }
      if (data.mood) {
        document.getElementById('mood').textContent = data.mood || '';
      }
      if (data.date) {
        document.getElementById('date').textContent = data.date || '';
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      fetch('state.json').then(r => r.json()).then(updateDashboard).catch(() => {});
    });
  </script>
</head>
<body class="bg-gray-950 text-white min-h-screen">
  <!-- Hero Canvas -->
  <div class="min-h-[60vh] flex flex-col items-center justify-center p-6 relative overflow-hidden">
    <div class="absolute inset-0 bg-gradient-to-b from-cyan-950/20 to-transparent pointer-events-none"></div>
    
    <div class="text-center mb-6 z-10">
      <p id="date" class="text-gray-500 text-sm tracking-widest uppercase mb-2"></p>
      <p id="mood" class="text-4xl mb-4 pulse-slow">ðŸ¤–</p>
    </div>
    
    <div id="canvas-content" class="z-10 max-w-2xl w-full text-center px-4">
      <p class="text-gray-500">Loading...</p>
    </div>
  </div>

  <!-- Stats Bar -->
  <div class="bg-gray-900/50 border-t border-gray-800">
    <div class="max-w-6xl mx-auto p-4">
      <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4 text-center text-sm">
        <div>
          <p class="text-gray-500 uppercase text-xs tracking-wide">CPU</p>
          <p id="cpu" class="font-mono text-green-400">-</p>
        </div>
        <div>
          <p class="text-gray-500 uppercase text-xs tracking-wide">Memory</p>
          <p id="mem" class="font-mono text-blue-400">-</p>
        </div>
        <div>
          <p class="text-gray-500 uppercase text-xs tracking-wide">Temp</p>
          <p id="temp" class="font-mono text-orange-400">-</p>
        </div>
        <div>
          <p class="text-gray-500 uppercase text-xs tracking-wide">Disk</p>
          <p id="disk" class="font-mono text-purple-400">-</p>
        </div>
        <div>
          <p class="text-gray-500 uppercase text-xs tracking-wide">Uptime</p>
          <p id="uptime" class="font-mono text-gray-300 text-xs">-</p>
        </div>
        <div>
          <p class="text-gray-500 uppercase text-xs tracking-wide">Sessions</p>
          <p id="sessions" class="font-mono text-gray-300">-</p>
        </div>
        <div>
          <p class="text-gray-500 uppercase text-xs tracking-wide">Last Ping</p>
          <p id="lastActivity" class="font-mono text-gray-300">-</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <div class="text-center py-6 text-gray-600 text-xs">
    <p>Observatory ðŸ”­ â€” <a href="https://github.com/doyeongk/observatory" class="text-cyan-600 hover:underline">GitHub</a></p>
  </div>
</body>
</html>
